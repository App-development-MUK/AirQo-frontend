<ion-header>
  <ion-navbar color="blue">
    <ion-buttons end>
      <button color="light" ion-button icon-only>
        AIR QUALITY
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<!-- <ion-content [style.backgroundImage]="api.nodeStatus(node.feeds.field1).background"> -->
<!-- <ion-content [style.background]="'assets/bg/0.png'"> -->
<ion-content [ngStyle] ="{'background-image' : 'url('+ api.nodeStatus(node.feeds.field1).background +')'}">
    
 <div class="top-section">

  <div class="place">
    <p class="place-name">{{ node.name }}</p>
    <p class="place-location">{{ node.location }}</p>
  </div>

  <ion-card class="node-card">
    <ion-grid class="node bg-white">
      <ion-row class="readings-section" [style.backgroundColor]="api.nodeStatus(node.feeds.field1).color">
        <ion-col col-3 class="face bg-darker">
          <img [src]="api.nodeStatus(node.feeds.field1).face"/>
        </ion-col>
        <ion-col col-4 class="values">
          <p class="number moderate-bold" [style.color]="api.nodeStatus(node.feeds.field1).font_color">{{ node.feeds.field1 }}</p>
          <p class="number-label moderate-bold" [style.color]="api.nodeStatus(node.feeds.field1).font_color">PM2.5</p>
        </ion-col>
        <ion-col col-5 class="label">
          <p text-wrap class="value-label moderate-bold" [style.color]="api.nodeStatus(node.feeds.field1).font_color">{{ api.nodeStatus(node.feeds.field1).label }}</p>
        </ion-col>
      </ion-row>
      <ion-row class="footer-section">
        <ion-col text-wrap class="date-section">
          <span class="node-refresh-date">Last Refreshed: {{ this.api.getReadableInternationalDateFormatFromSQLFormat(node.refreshed) }}</span>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-card>
 </div>

<div class="bottom-section bg-white">

  <!-- <ion-card class="key-card">
    <div class="key">
      <div text-wrap class="key-label bg-green white">Good</div>
      <div text-wrap class="key-label bg-yellow dark-blue">Moderate</div>
      <div text-wrap class="key-label bg-orange white">Sensitive</div>
      <div text-wrap class="key-label bg-red white">Unhealthy</div>
      <div text-wrap class="key-label bg-purple white">V.Unhealthy</div>
      <div text-wrap class="key-label bg-maroon white">Hazardous</div>
    </div>
  </ion-card> -->

  <div padding>
    <ion-segment [color]="api.nodeStatus(node.feeds.field1).css_color" [(ngModel)]="graphs_segments">
      <ion-segment-button value="history">
        History
      </ion-segment-button>
      <ion-segment-button value="forecast">
        Forecast
      </ion-segment-button>
    </ion-segment>
  </div>

  <ion-scroll class="bar-chart-scroll" zoom="true">
    <div [ngSwitch]="'graphs_segments'">
      <div class="bar-canvas" *ngSwitchCase="'history'">
        <canvas #barCanvasHistory></canvas>
      </div>
  
      <div class="bar-canvas" *ngSwitchCase="'forecast'">
        <!-- <canvas #barCanvasForecast></canvas> -->
      </div>
    </div>    
  </ion-scroll>
</div>

  <ion-fab right middle (click)="goToKeyPage()">
    <button ion-fab color="green">KEY</button>
  </ion-fab>


</ion-content>
